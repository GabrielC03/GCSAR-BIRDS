---
title: "GCSAR MIDTERM"
format: html
editor: visual
---

Gabriel Cabrera, Jaela Nguyen, Sabrina Penn, Lilah Shtino, Jessica Underkoffler

## Campus Biodiversity Data

A rich biodiversity on college campuses has been shown to increase the well-being of students, professors, and staff members. This project looks at biodiversity data in bird species richness, across several academic institutions from east coast states in the United States including Florida, Massachusetts, North Carolina, and Pennsylvania. To understand the full effect on what bird species richness has on college campuses, several relationships were researched including...(include research topics)

First lets import some useful packages:

```{r}
library(tidyr)
library(tidyverse)
library(ggplot2)
library(readxl)
#Version 1.4.3 of readxl was used
```

Data is from the eBird database created by Cornell Lab of Ornithology, a database that allows users to add their bird observations from college campuses across the world, and the Integrated Post-secondary Education Data System (IPEDS) a database that gathers information from every college and institution that participates in federal student aid programs.

```{r}
ipeds <- read_excel("downloads/IPEDS_combined_MEPANCFL_v4.xlsx")
ebirds <- read_excel("downloads/EBbird_IPEDS_UNITID_MEPANCFL_Jan23-May23_v3.xlsx")
#Reading the data formatted in Excel
```

## Bird Species Richness and Impervious Surfaces

Bird species richness looks at how many different bird species there are at each campus. Impervious surfaces is identified as a continuous metric representing the percentage of mean impervious surface cover within a 0.5km radius around the recorded IPEDS lat/long for the institution derived from 2019 NLCD (National Land Cover Data).

Let's first look at bird species richness:

```{r}
ebirds$`OBSERVATION COUNT` <- as.numeric(gsub(",", "", ebirds$`OBSERVATION COUNT`))
#makes sure all observations are numerical 


# summarization and join
combined_data <- ebirds |>
  group_by(UNITID, `COMMON NAME`) |>
  summarise(
    total_observations = sum(`OBSERVATION COUNT`, na.rm = TRUE),
    .groups = "drop"
  ) |>
  group_by(UNITID) |>
  summarise(
    species_richness = n_distinct(`COMMON NAME`),
    total_observations_all = sum(total_observations),
    .groups = "drop"
  ) |>
  arrange(UNITID, desc(total_observations_all))

combined_data

#this finds the species richness as well as the total observations of each college campus
```

Now we want to join this with the IPEDS data to find the relationship between bird species richness and impervious surfaces

```{r}
ebirds_ipeds_impervious <- combined_data |>
  left_join(ipeds, by = "UNITID") |>
  select(UNITID, INSTNM ,species_richness, mean_impervious) |>
  distinct(UNITID, .keep_all = TRUE) |>
  drop_na()
ebirds_ipeds_impervious
#join with IPEDS dataset by distinct key "UNITID" keeping 
```

Finally, create a plot to visualize bird species richness and impervious surfaces

```{r}
ggplot(ebirds_ipeds_impervious, aes(y = species_richness, x = mean_impervious)) +
  geom_point() +
  labs(
    title = "Relationship between species richness and impervious surfaces",
    subtitle = "Institutions are limited to locations in Maine, Pennyslvania, North Carolina, and Florida",
    x = "Impervious Surfaces",
    y = "Species Richness"
    
  )
#A simple scatter point graph is created using ggplots package
```

###What is the relationship?

##Graduation Rate and Bird Species Richness
A rich biodiverse campus is linked to better well-being of students, often resulting in academic persistance. Does having a rich bird biodiversity result in a higher graduation rate?


```{r}
unitid_state <- ipeds |>
  group_by(UNITID) |>
  summarise(STATE = STABBR.x)

#There are many data points in this data so lets look at this state by state


```

